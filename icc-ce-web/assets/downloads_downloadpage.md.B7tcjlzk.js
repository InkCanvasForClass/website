import{_ as k,c as _,o as B,ai as E}from"./chunks/framework.Dxzt7ePs.js";(function(){typeof window>"u"||window.addEventListener("load",function(){const a=document.getElementById("stableBtn"),n=document.getElementById("betaBtn"),l=document.getElementById("currentVersion"),d=document.getElementById("versionDesc"),o=document.getElementById("downloadBtn"),p=document.getElementById("loadingIndicator"),u=document.getElementById("releaseNotes"),w=document.getElementById("releaseContent");if(!a||!n||!l||!d||!o||!p){console.error("无法找到必要的DOM元素");return}const h={stable:{repo:"InkCanvasForClass/community",description:"这是稳定的正式发布版本，适合日常使用。"},beta:{repo:"InkCanvasForClass/community-beta",description:"这是测试版本，包含最新功能，但可能不稳定。"}},f={stable:"https://github.com/InkCanvasForClass/community/releases/download/{version}/InkCanvasForClass.CE.{version}.zip",beta:"https://github.com/InkCanvasForClass/community-beta/releases/download/{version}/InkCanvasForClass.CE.{version}.zip"};let r="stable",s="",i="";async function v(e){b(!0);const m=h[e];try{const t=await fetch(`https://api.github.com/repos/${m.repo}/releases/latest`);if(!t.ok)throw new Error(`GitHub API 请求失败: ${t.status}`);const c=await t.json();s=c.tag_name,l.textContent=s,d.textContent=m.description,c.body?(w.innerHTML=y(c.body),u.style.display="block"):u.style.display="none";const g=c.assets.find(C=>C.name.includes("InkCanvasForClass.CE")&&C.name.endsWith(".zip"));g?i=g.browser_download_url:i=f[e].replace(/{version}/g,s),o.disabled=!1,b(!1)}catch(t){console.error("获取版本信息失败:",t),I(e)}}function y(e){return e.replace(/### (.*)/g,"<h4>$1</h4>").replace(/## (.*)/g,"<h3>$1</h3>").replace(/# (.*)/g,"<h2>$1</h2>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/- (.*)/g,"<li>$1</li>").replace(/(<li>.*<\/li>)/gs,"<ul>$1</ul>").replace(/\n/g,"<br>")}function b(e){p.style.display=e?"flex":"none"}v("stable"),a.addEventListener("click",function(){r!=="stable"&&(r="stable",a.classList.add("active"),n.classList.remove("active"),v("stable"))}),n.addEventListener("click",function(){r!=="beta"&&(r="beta",n.classList.add("active"),a.classList.remove("active"),v("beta"))}),o.addEventListener("click",function(){i&&window.open(i,"_blank")});function I(e){console.log("GitHub API 请求失败，使用备用数据..."),b(!1);const t={stable:{version:"1.7.3.0",desc:"这是稳定的正式发布版本，适合日常使用。"},beta:{version:"1.7.3.0",desc:"这是测试版本，包含最新功能，但可能不稳定。"}}[e];s=t.version,l.textContent=s,d.textContent=t.desc,i=f[e].replace(/{version}/g,s),u.style.display="none",o.disabled=!1}})})();const x=JSON.parse('{"title":"InkCanvasForClass 下载中心","description":"","frontmatter":{},"headers":[],"relativePath":"downloads/downloadpage.md","filePath":"downloads/downloadpage.md","lastUpdated":1753593534000}'),$={name:"downloads/downloadpage.md"};function F(a,n,l,d,o,p){return B(),_("div",null,n[0]||(n[0]=[E('<h1 id="inkcanvasforclass-下载中心" tabindex="-1">InkCanvasForClass 下载中心 <a class="header-anchor" href="#inkcanvasforclass-下载中心" aria-label="Permalink to &quot;InkCanvasForClass 下载中心&quot;">​</a></h1><div class="download-container"><div class="version-selector"><button id="stableBtn" class="active">正式版</button><button id="betaBtn">测试版</button></div><div class="version-info"><h2>当前版本: <span id="currentVersion">检测中...</span></h2><p id="versionDesc"></p><div class="release-notes" id="releaseNotes" style="display:none;"><h3>更新说明:</h3><div id="releaseContent"></div></div></div><div class="download-button"><button id="downloadBtn" disabled>下载最新版本</button></div><div class="loading" id="loadingIndicator"><div class="spinner"></div><p>正在检测最新版本...</p></div></div>',2)]))}const D=k($,[["render",F]]);export{x as __pageData,D as default};
